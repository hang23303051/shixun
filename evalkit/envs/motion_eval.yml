name: ref4d_motion
channels:
  - pytorch
  - nvidia
  - conda-forge
  - defaults

dependencies:
  # === 基础环境 ===
  - python=3.12
  - pip
  - ffmpeg               # 视频 I/O（配合 decord/av/opencv 使用）

  # === 科学计算 / 图像处理 ===
  - numpy=2.2
  - scipy=1.13
  - scikit-image=0.25
  - pandas=2.2
  - matplotlib=3.10
  - pillow=11.0
  - pyyaml
  - tqdm
  - requests
  - rich
  - tabulate

  # === PyTorch + CUDA 12.1（用于 PTLFlow / SAM / GroundingDINO 等）===
  - pytorch=2.5.1
  - torchvision=0.20.1
  - torchaudio=2.5.1
  - pytorch-cuda=12.1

  # === 其余包用 pip 安装 ===
  - pip:
      # --- 视频 I/O + 图像处理 ---
      - opencv-python==4.10.0.84
      - opencv-contrib-python-headless==4.12.0.88
      - decord==0.6.0
      - av==16.0.1
      - imageio==2.37.0
      - mediapy==1.2.4

      # --- RRM 评分 / 数值相关 ---
      - dtaidistance==2.3.12
      - piq==0.8.0
      - imagehash==4.3.1
      - kornia==0.8.1
      - kornia-rs==0.1.9
      - lmdb==1.7.5
      - loguru==0.7.3
      - supervision==0.26.1

      # --- 光流 / 场景切分（FRZ & 诊断用）---
      - ptlflow==0.4.1
      - scenedetect==0.6.7

      # --- 目标检测 / 分割 / 主体掩码支持 ---
      - pycocotools==2.0.10
      - huggingface-hub==0.35.3
      - transformers==4.57.0
      - timm==1.0.19
      - safetensors==0.6.2
      - tokenizers==0.22.1
      - segment-anything==1.0

      # --- TAPIR 所需 JAX 栈（JAX + Haiku + Optax 等）---
      - absl-py==2.3.1
      - chex==0.1.86
      - dm-haiku==0.0.12
      - optax==0.2.3
      - ml-collections==1.1.0
      - ml-dtypes==0.5.3
      - etils==1.13.0
      - orbax-checkpoint==0.11.25
      - tensorstore==0.1.77
      - jax==0.7.2
      - jaxlib==0.7.2
      - jax-cuda12-pjrt==0.7.2
      - jax-cuda12-plugin==0.7.2
      - grpcio==1.75.0
      - h5py==3.12.1

      # --- 训练日志 / 配置（TAPIR 官方代码依赖）---
      - tensorboard==2.18.0
      - tensorboard-data-server==0.7.2
      - tensorboardX==2.6.4
      - hydra-core==1.3.2
      - jsonargparse==4.41.0
      - protobuf==6.32.1
