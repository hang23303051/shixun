# 视频生成模型评测平台(Ref4D)需求文档

# 基础开发环境：
- 操作系统：win11
- 前端框架：vue3+tailwind
- 后端框架：Django
- 数据库：Mysql

# 项目背景
主要目标是对已完成的科研项目进行工程化落地。该科研项目的主要内容为：针对市面上主流存在的视频生成模型(主要有cogfun，cogvideo5b，jimeng，kling，sora2，videocrafter，vidu，wan21)，我们设计了一套完整的测试数据集对每个模型生成的效果从基础语义一致性，时序一致性，运动属性和世界知识真实性四个维度上进行打分。因此本次项目的主要内容就是开发一个web网站，展示已有模型的打分成果，并给用户提供一个测试接口，支持用户提交新的模型api进行打分测试。

# 项目整体设计
## 前端vue尽量采用组件化设计:
在前端头部创建一个header导航栏，包含：首页，数据集，模型，排行榜，评测试用，个人中心，登陆/注册按钮共7个模块，下面对每个模块的功能进行逐一讲解：

### 首页
主要介绍网站内容，包括网站用途，网站数据集规模，项目发展历程，并通过合适的ui交互支持跳转到其他模块

### 数据集
以合适的ui方式对测试数据集进行介绍，以下是数据集介绍：我们本次项目只有一个数据集，它的每一个测试用例包含一个参考视频-视频描述prompt对，该数据集总共包含600条测试用例，并分为animals_and_ecology，architecture，commercial_marketing，food，industrial_activity，landscape，people_daily，sports_competition，transportation共9个主题。

### 模型
主要展示各个模型的简介，具体设计需求是：在模型首页展示模型列表，然后点击具体的某个模型后，需要展示对这个模型的具体介绍，包括但不限于：文字简介，发布者，参数规模，是否开源，发布时间，跳转官网按钮，该模型在四个维度上的评分(通过雷达图和柱形图显示)，测试人(管理员后台上传or普通用户上传).

### 排行榜
支持在总榜和四个维度上显示模型打分排行榜，需要显示每个模型的分数。排行榜是实时渲染的，每次显示都需要从数据库中读取模型列表重新计算排行榜并显示

### 评测试用
需要用户提供API地址(例如https://api/example.com/v1),密钥，model名，在用户点击提交测试按钮后会将请求发送到后端跑打分算法(由我们实现，你不需要管，只保留接口即可)，在后端算法完成之前，前端的打分结果页面显示：正在测试中；在后端算法完成后，前端的打分结果页面需要显示该模型在四个维度上的打分(雷达图和柱形图显示)，并将其加入到现有排行榜中。

### 任务列表
显示用户提交的任务的执行状态，包括：任务id，任务名称，任务状态，任务开始时间，任务结束时间，任务执行结果，任务执行日志，如果任务成功执行，则将评测结果保存到model表中，并在模型前端页面显示。

### 个人中心
显示用户名和邮箱(以邮箱为主键)，并支持上传头像，支持修改用户名和密码

### 登录/注册
登陆时通过用户名/邮箱和密码进行登录，注册时通过用户名，密码，邮箱进行注册，普通用户在未登录的情况下可以访问首页，数据集，模型和排行榜模块，但无法访问评测试用模块，任务列表模块和个人中心模块，登陆后可正常访问所有模块。

## 后端设计基于django的设计框架，我们创建以下几个应用：

### refdata应用
创建一张名为refdata的表用于存储测试数据集，每一行分别存储：视频id，主题类型，镜头类型(single/multi)，prompt描述以及视频文件，再创建一张gendata表用于后续打分算法过程中的数据存储。每一行分别存储：视频id，主题类型，镜头类型，模型名称，prompt描述以及视频文件。编写逻辑响应前端的展示请求。这一部分对应的前端是写死的，因为我们不会新增评测的数据集了，因此django后台也无需对refdata部分的数据进行修改。

### model_eval应用
创建一张model表用于存储每个已经被评测过的模型的信息，每行需要包含文字简介，发布者，参数规模，是否开源，发布时间，官网链接，该模型在四个维度上的评分(通过雷达图和柱形图显示)，总分，测试人(后台超级用户或者普通用户)。该应用同时需要响应前端的排行榜获取请求，实现相关的排序逻辑

### eval_test应用(项目核心)
接受前端传来的API地址，密钥以及模型名，先调用对应的生成视频，再使用打分算法对新模型生成的视频效果进行打分，然后将新模型及其相关信息添加到model表中

### account应用
创建user表，响应登录注册逻辑，并支持修改个人信息。其中user表需要包含的字段为：用户名，邮箱(主键)，密码(盐值加密)

在账户管理上，分为超级管理员和普通用户，其中普通用户可以使用评测试用功能对新模型进行评测，user表中存储的也全部是普通用户，只有超级管理员可以进入后台，对模型模块以及用户模块的信息进行编辑。测试数据集在创建时即写死，排行榜数据由模型数据表决定，gendata表可由打分算法编辑。
数据跨域问题通过在前端配置vue.config.js解决

